<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
        <script type="module">
            import { Octokit } from "https://cdn.skypack.dev/@octokit/core";
            const octokit = new Octokit({
                auth: `3c2c281de0e6785bc848c6041991db5034be8543`,
            });
            async function* fetchCommits(branchList) {
                for (let x = 0; x < branchList.length; x++) {
                    yield await octokit.request(
                        "GET /repos/{owner}/{repo}/branches/{branch}",
                        {
                            owner: "dineshannadurai",
                            repo: "play-ground",
                            branch: branchList[x].name,
                        }
                    );
                    // console.log(
                    //     "branchResponse",
                    //     branchResponse.commit.author.date
                    // );
                    
                }
            }
            (async () => {
                const branchListResponse = await octokit.request(
                    "GET /repos/{owner}/{repo}/branches",
                    {
                        owner: "dineshannadurai",
                        repo: "play-ground",
                    }
                );
                console.log("Response", branchListResponse);

                const { data: branchList } = branchListResponse;

                for await (const details of fetchCommits(branchList)) {
                    console.log(details.data.commit.commit.author.date);
                }
            })();
        </script>
    </head>
    <body>
        <div>Checking the features in Octokit</div>
    </body>
</html>
